{"remainingRequest":"C:\\Users\\Noah Eydan\\Documents\\Poli\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Noah Eydan\\Documents\\Poli\\frontend\\src\\views\\professor\\Assignments.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Noah Eydan\\Documents\\Poli\\frontend\\src\\views\\professor\\Assignments.vue","mtime":1649220549409},{"path":"C:\\Users\\Noah Eydan\\Documents\\Poli\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649220384704},{"path":"C:\\Users\\Noah Eydan\\Documents\\Poli\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1649220379926},{"path":"C:\\Users\\Noah Eydan\\Documents\\Poli\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649220384704},{"path":"C:\\Users\\Noah Eydan\\Documents\\Poli\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1649220506974}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgTmF2YmFyUCBmcm9tICJAL2NvbXBvbmVudHMvTmF2YmFyUCI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YTogKCkgPT4gKHsNCiAgICBhbGVydDogeyBzaG93OiBmYWxzZSB9LA0KICAgIHByb2Zlc3Nvcjoge30sDQogICAgY291cnNlOiB7fSwNCiAgICBhc3NpZ25tZW50c0xpc3Q6IFtdLA0KICAgIGFzc2lnbm1lbnRUb0FkZDoge30sDQogICAgZGVsaXZlcmllc0xpc3Q6IFtdLA0KICAgIHNob3dEZWx2OiBmYWxzZSwNCiAgICBhZGQ6IGZhbHNlDQogIH0pLA0KICBtZXRob2RzOiB7DQogICAgb3BlbihsaW5rKSB7DQogICAgICB3aW5kb3cub3BlbihsaW5rKTsNCiAgICB9LA0KICAgIGFzeW5jIGFkZEFzc2lnbm1lbnQoKSB7DQogICAgICBsZXQgdmFsaWQgPSB0aGlzLiRyZWZzLmFkZEZvcm0udmFsaWRhdGUoKTsNCiAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICB0cnkgew0KICAgICAgICAgIGNvbnN0IG5ld0Fzc2lnbm1lbnQgPSBuZXcgRm9ybURhdGEoKTsNCiAgICAgICAgICBuZXdBc3NpZ25tZW50LmFwcGVuZCgiYV9uYW1lIiwgdGhpcy5hc3NpZ25tZW50VG9BZGQuYV9uYW1lKTsNCiAgICAgICAgICBuZXdBc3NpZ25tZW50LmFwcGVuZCgNCiAgICAgICAgICAgICJhX2Rlc2NyaXB0aW9uIiwNCiAgICAgICAgICAgIHRoaXMuYXNzaWdubWVudFRvQWRkLmFfZGVzY3JpcHRpb24NCiAgICAgICAgICApOw0KICAgICAgICAgIG5ld0Fzc2lnbm1lbnQuYXBwZW5kKCJhX2ZpbGUiLCB0aGlzLmFzc2lnbm1lbnRUb0FkZC5hX2ZpbGUpOw0KDQogICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5heGlvcy5wb3N0KA0KICAgICAgICAgICAgYC9wcm9mZXNzb3IvYXNzaWdubWVudC8ke3RoaXMuJHJvdXRlLnBhcmFtcy5pZF9jfWAsDQogICAgICAgICAgICBuZXdBc3NpZ25tZW50DQogICAgICAgICAgKTsNCiAgICAgICAgICB0aGlzLmFzc2lnbm1lbnRzTGlzdC5wdXNoKHJlcy5kYXRhLmFzc2lnbm1lbnQpOw0KICAgICAgICAgIHRoaXMuJHJlZnMuYWRkRm9ybS5yZXNldCgpOw0KICAgICAgICAgIHRoaXMuYWRkID0gZmFsc2U7DQogICAgICAgICAgdGhpcy5hbGVydCA9IHsNCiAgICAgICAgICAgIHNob3c6IHRydWUsDQogICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsDQogICAgICAgICAgICBtZXNzYWdlOiByZXMuZGF0YS5tZXNzYWdlDQogICAgICAgICAgfTsNCiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIGFzeW5jIGdldERlbGl2ZXJpZXMoaWRfYSkgew0KICAgICAgdHJ5IHsNCiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5heGlvcy5nZXQoYC9wcm9mZXNzb3IvZGVsaXZlcmllcy8ke2lkX2F9YCk7DQogICAgICAgIHRoaXMuZGVsaXZlcmllc0xpc3QgPSByZXMuZGF0YTsNCiAgICAgICAgdGhpcy5zaG93RGVsdiA9IHRydWU7DQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7DQogICAgICB9DQogICAgfQ0KICB9LA0KICBjcmVhdGVkOiBmdW5jdGlvbigpIHsNCiAgICB0aGlzLnByb2Zlc3NvciA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgic2Vzc2lvbiIpKTsNCiAgICBpZiAodGhpcy5wcm9mZXNzb3IgPT0gbnVsbCkgew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi8iKTsNCiAgICB9IGVsc2UgaWYgKHRoaXMucHJvZmVzc29yLnJvbGUgIT0gInByb2Zlc3NvciIpIHsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvcHJvZmlsZSIpOw0KICAgIH0gZWxzZSB7DQogICAgICAvLyBDb3Vyc2UgaW5mb3JtYXRpb24NCiAgICAgIHRoaXMuYXhpb3MNCiAgICAgICAgLmdldChgL3Byb2Zlc3Nvci9jb3Vyc2UvJHt0aGlzLiRyb3V0ZS5wYXJhbXMuaWRfY31gKQ0KICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgIHRoaXMuY291cnNlID0gcmVzLmRhdGEuY291cnNlOw0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coZSk7DQogICAgICAgIH0pOw0KDQogICAgICAvLyBBc3NpZ25tZW50cw0KICAgICAgdGhpcy5heGlvcw0KICAgICAgICAuZ2V0KGAvcHJvZmVzc29yL2NvdXJzZS1hc3NpZ25tZW50cy8ke3RoaXMuJHJvdXRlLnBhcmFtcy5pZF9jfWApDQogICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgdGhpcy5hc3NpZ25tZW50c0xpc3QgPSByZXMuZGF0YTsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKGUpOw0KICAgICAgICB9KTsNCiAgICB9DQogIH0sDQogIGNvbXBvbmVudHM6IHsNCiAgICBOYXZiYXJQDQogIH0NCn07DQo="},{"version":3,"sources":["Assignments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Assignments.vue","sourceRoot":"src/views/professor","sourcesContent":["<template>\r\n  <v-container class=\"text-center\">\r\n    <NavbarP :p_name=\"professor.name\" />\r\n    <v-alert\r\n      class=\"text-start\"\r\n      text\r\n      v-model=\"alert.show\"\r\n      :type=\"alert.type\"\r\n      dismissible\r\n    >{{alert.message}}</v-alert>\r\n    <h1 class=\"font-weight-light\">{{course.c_name}}</h1>\r\n    <h2 class=\"font-weight-thin\">{{course.c_description}}</h2>\r\n    <v-row justify=\"center\">\r\n      <v-col md=\"9\" sm=\"12\">\r\n        <v-simple-table fixed-header>\r\n          <thead>\r\n            <tr>\r\n              <th class=\"text-center\">Marca</th>\r\n              <th class=\"text-center\">Modelo</th>\r\n             <!--  <th class=\"text-center\">File</th>\r\n              <th class=\"text-center\">Deliveries</th> -->\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"assignment in assignmentsList\" :key=\"assignment.id_a\">\r\n              <td>{{assignment.a_name}}</td>\r\n              <td>{{assignment.a_description}}</td>\r\n              <td>\r\n                <v-icon @click=\"open(assignment.a_file)\">mdi-file-pdf</v-icon>\r\n              </td>\r\n              <td>\r\n                <v-icon\r\n                  color=\"cyan darken-1\"\r\n                  @click=\"getDeliveries(assignment.id_a)\"\r\n                >mdi-book-open-page-variant</v-icon>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </v-simple-table>\r\n      </v-col>\r\n    </v-row>\r\n    <v-dialog v-model=\"showDelv\" max-width=\"450\">\r\n      <v-simple-table fixed-header>\r\n        <thead>\r\n          <tr>\r\n            <th class=\"text-center\">Name student</th>\r\n            <th class=\"text-center\">Delivery</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"delivery in deliveriesList\" :key=\"delivery.id_d\" class=\"text-center\">\r\n            <td>{{delivery.s_name}}</td>\r\n            <td>\r\n              <a @click=\"open(delivery.d_file)\">{{delivery.d_filename}}</a>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </v-simple-table>\r\n    </v-dialog>\r\n    <v-dialog v-model=\"add\" max-width=\"450\">\r\n      <v-card>\r\n        <v-card-title>AÃ±adir Dispositivo</v-card-title>\r\n        <v-card-text>\r\n          <v-form ref=\"addForm\" class=\"ma-3\" @submit.prevent=\"addAssignment()\">\r\n            <v-file-input\r\n              label=\"File\"\r\n              :rules=\"[(v) => !!v || 'File']\"\r\n              v-model=\"assignmentToAdd.a_file\"\r\n            ></v-file-input>\r\n            <v-text-field\r\n              prepend-icon=\"mdi-biohazard\"\r\n              label=\"Marca\"\r\n              :rules=\"[(v) => !!v || 'Marca es requerido']\"\r\n              v-model=\"assignmentToAdd.a_name\"\r\n            ></v-text-field>\r\n            <v-textarea\r\n              prepend-icon=\"mdi-bike\"\r\n              label=\"Modelo\"\r\n              :rules=\"[(v) => !!v || 'Modelo es requerido']\"\r\n              v-model=\"assignmentToAdd.a_description\"\r\n            ></v-textarea>\r\n            <v-btn block class=\"success mt-3\" type=\"submit\">Guardar</v-btn>\r\n          </v-form>\r\n        </v-card-text>\r\n      </v-card>\r\n    </v-dialog>\r\n    <v-btn @click=\"add=true\" color=\"deep-orange\" large right fixed bottom fab dark>\r\n      <v-icon>mdi-plus</v-icon>\r\n    </v-btn>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport NavbarP from \"@/components/NavbarP\";\r\n\r\nexport default {\r\n  data: () => ({\r\n    alert: { show: false },\r\n    professor: {},\r\n    course: {},\r\n    assignmentsList: [],\r\n    assignmentToAdd: {},\r\n    deliveriesList: [],\r\n    showDelv: false,\r\n    add: false\r\n  }),\r\n  methods: {\r\n    open(link) {\r\n      window.open(link);\r\n    },\r\n    async addAssignment() {\r\n      let valid = this.$refs.addForm.validate();\r\n      if (valid) {\r\n        try {\r\n          const newAssignment = new FormData();\r\n          newAssignment.append(\"a_name\", this.assignmentToAdd.a_name);\r\n          newAssignment.append(\r\n            \"a_description\",\r\n            this.assignmentToAdd.a_description\r\n          );\r\n          newAssignment.append(\"a_file\", this.assignmentToAdd.a_file);\r\n\r\n          const res = await this.axios.post(\r\n            `/professor/assignment/${this.$route.params.id_c}`,\r\n            newAssignment\r\n          );\r\n          this.assignmentsList.push(res.data.assignment);\r\n          this.$refs.addForm.reset();\r\n          this.add = false;\r\n          this.alert = {\r\n            show: true,\r\n            type: \"success\",\r\n            message: res.data.message\r\n          };\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n      }\r\n    },\r\n    async getDeliveries(id_a) {\r\n      try {\r\n        const res = await this.axios.get(`/professor/deliveries/${id_a}`);\r\n        this.deliveriesList = res.data;\r\n        this.showDelv = true;\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n  },\r\n  created: function() {\r\n    this.professor = JSON.parse(sessionStorage.getItem(\"session\"));\r\n    if (this.professor == null) {\r\n      this.$router.push(\"/\");\r\n    } else if (this.professor.role != \"professor\") {\r\n      this.$router.push(\"/profile\");\r\n    } else {\r\n      // Course information\r\n      this.axios\r\n        .get(`/professor/course/${this.$route.params.id_c}`)\r\n        .then(res => {\r\n          this.course = res.data.course;\r\n        })\r\n        .catch(e => {\r\n          console.log(e);\r\n        });\r\n\r\n      // Assignments\r\n      this.axios\r\n        .get(`/professor/course-assignments/${this.$route.params.id_c}`)\r\n        .then(res => {\r\n          this.assignmentsList = res.data;\r\n        })\r\n        .catch(e => {\r\n          console.log(e);\r\n        });\r\n    }\r\n  },\r\n  components: {\r\n    NavbarP\r\n  }\r\n};\r\n</script>"]}]}