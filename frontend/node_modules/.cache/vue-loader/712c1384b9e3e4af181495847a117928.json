{"remainingRequest":"C:\\Users\\Noah Eydan\\Downloads\\PEVN-master\\pevn-fe\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Noah Eydan\\Downloads\\PEVN-master\\pevn-fe\\src\\views\\professor\\Assignments.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Noah Eydan\\Downloads\\PEVN-master\\pevn-fe\\src\\views\\professor\\Assignments.vue","mtime":1648787552981},{"path":"C:\\Users\\Noah Eydan\\Downloads\\PEVN-master\\pevn-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648655172549},{"path":"C:\\Users\\Noah Eydan\\Downloads\\PEVN-master\\pevn-fe\\node_modules\\babel-loader\\lib\\index.js","mtime":1648655179752},{"path":"C:\\Users\\Noah Eydan\\Downloads\\PEVN-master\\pevn-fe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648655172549},{"path":"C:\\Users\\Noah Eydan\\Downloads\\PEVN-master\\pevn-fe\\node_modules\\vue-loader\\lib\\index.js","mtime":1648655172892}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBOYXZiYXJQIGZyb20gIkAvY29tcG9uZW50cy9OYXZiYXJQIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiAoKSA9PiAoewogICAgYWxlcnQ6IHsgc2hvdzogZmFsc2UgfSwKICAgIHByb2Zlc3Nvcjoge30sCiAgICBjb3Vyc2U6IHt9LAogICAgYXNzaWdubWVudHNMaXN0OiBbXSwKICAgIGFzc2lnbm1lbnRUb0FkZDoge30sCiAgICBkZWxpdmVyaWVzTGlzdDogW10sCiAgICBzaG93RGVsdjogZmFsc2UsCiAgICBhZGQ6IGZhbHNlCiAgfSksCiAgbWV0aG9kczogewogICAgb3BlbihsaW5rKSB7CiAgICAgIHdpbmRvdy5vcGVuKGxpbmspOwogICAgfSwKICAgIGFzeW5jIGFkZEFzc2lnbm1lbnQoKSB7CiAgICAgIGxldCB2YWxpZCA9IHRoaXMuJHJlZnMuYWRkRm9ybS52YWxpZGF0ZSgpOwogICAgICBpZiAodmFsaWQpIHsKICAgICAgICB0cnkgewogICAgICAgICAgY29uc3QgbmV3QXNzaWdubWVudCA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgbmV3QXNzaWdubWVudC5hcHBlbmQoImFfbmFtZSIsIHRoaXMuYXNzaWdubWVudFRvQWRkLmFfbmFtZSk7CiAgICAgICAgICBuZXdBc3NpZ25tZW50LmFwcGVuZCgKICAgICAgICAgICAgImFfZGVzY3JpcHRpb24iLAogICAgICAgICAgICB0aGlzLmFzc2lnbm1lbnRUb0FkZC5hX2Rlc2NyaXB0aW9uCiAgICAgICAgICApOwogICAgICAgICAgbmV3QXNzaWdubWVudC5hcHBlbmQoImFfZmlsZSIsIHRoaXMuYXNzaWdubWVudFRvQWRkLmFfZmlsZSk7CgogICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5heGlvcy5wb3N0KAogICAgICAgICAgICBgL3Byb2Zlc3Nvci9hc3NpZ25tZW50LyR7dGhpcy4kcm91dGUucGFyYW1zLmlkX2N9YCwKICAgICAgICAgICAgbmV3QXNzaWdubWVudAogICAgICAgICAgKTsKICAgICAgICAgIHRoaXMuYXNzaWdubWVudHNMaXN0LnB1c2gocmVzLmRhdGEuYXNzaWdubWVudCk7CiAgICAgICAgICB0aGlzLiRyZWZzLmFkZEZvcm0ucmVzZXQoKTsKICAgICAgICAgIHRoaXMuYWRkID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmFsZXJ0ID0gewogICAgICAgICAgICBzaG93OiB0cnVlLAogICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5kYXRhLm1lc3NhZ2UKICAgICAgICAgIH07CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBnZXREZWxpdmVyaWVzKGlkX2EpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmF4aW9zLmdldChgL3Byb2Zlc3Nvci9kZWxpdmVyaWVzLyR7aWRfYX1gKTsKICAgICAgICB0aGlzLmRlbGl2ZXJpZXNMaXN0ID0gcmVzLmRhdGE7CiAgICAgICAgdGhpcy5zaG93RGVsdiA9IHRydWU7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbigpIHsKICAgIHRoaXMucHJvZmVzc29yID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJzZXNzaW9uIikpOwogICAgaWYgKHRoaXMucHJvZmVzc29yID09IG51bGwpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi8iKTsKICAgIH0gZWxzZSBpZiAodGhpcy5wcm9mZXNzb3Iucm9sZSAhPSAicHJvZmVzc29yIikgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3Byb2ZpbGUiKTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIENvdXJzZSBpbmZvcm1hdGlvbgogICAgICB0aGlzLmF4aW9zCiAgICAgICAgLmdldChgL3Byb2Zlc3Nvci9jb3Vyc2UvJHt0aGlzLiRyb3V0ZS5wYXJhbXMuaWRfY31gKQogICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICB0aGlzLmNvdXJzZSA9IHJlcy5kYXRhLmNvdXJzZTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgIH0pOwoKICAgICAgLy8gQXNzaWdubWVudHMKICAgICAgdGhpcy5heGlvcwogICAgICAgIC5nZXQoYC9wcm9mZXNzb3IvY291cnNlLWFzc2lnbm1lbnRzLyR7dGhpcy4kcm91dGUucGFyYW1zLmlkX2N9YCkKICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgdGhpcy5hc3NpZ25tZW50c0xpc3QgPSByZXMuZGF0YTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgIH0pOwogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgTmF2YmFyUAogIH0KfTsK"},{"version":3,"sources":["Assignments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Assignments.vue","sourceRoot":"src/views/professor","sourcesContent":["<template>\n  <v-container class=\"text-center\">\n    <NavbarP :p_name=\"professor.name\" />\n    <v-alert\n      class=\"text-start\"\n      text\n      v-model=\"alert.show\"\n      :type=\"alert.type\"\n      dismissible\n    >{{alert.message}}</v-alert>\n    <h1 class=\"font-weight-light\">{{course.c_name}}</h1>\n    <h2 class=\"font-weight-thin\">{{course.c_description}}</h2>\n    <v-row justify=\"center\">\n      <v-col md=\"9\" sm=\"12\">\n        <v-simple-table fixed-header>\n          <thead>\n            <tr>\n              <th class=\"text-center\">Marca</th>\n              <th class=\"text-center\">Modelo</th>\n             <!--  <th class=\"text-center\">File</th>\n              <th class=\"text-center\">Deliveries</th> -->\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"assignment in assignmentsList\" :key=\"assignment.id_a\">\n              <td>{{assignment.a_name}}</td>\n              <td>{{assignment.a_description}}</td>\n              <td>\n                <v-icon @click=\"open(assignment.a_file)\">mdi-file-pdf</v-icon>\n              </td>\n              <td>\n                <v-icon\n                  color=\"cyan darken-1\"\n                  @click=\"getDeliveries(assignment.id_a)\"\n                >mdi-book-open-page-variant</v-icon>\n              </td>\n            </tr>\n          </tbody>\n        </v-simple-table>\n      </v-col>\n    </v-row>\n    <v-dialog v-model=\"showDelv\" max-width=\"450\">\n      <v-simple-table fixed-header>\n        <thead>\n          <tr>\n            <th class=\"text-center\">Name student</th>\n            <th class=\"text-center\">Delivery</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"delivery in deliveriesList\" :key=\"delivery.id_d\" class=\"text-center\">\n            <td>{{delivery.s_name}}</td>\n            <td>\n              <a @click=\"open(delivery.d_file)\">{{delivery.d_filename}}</a>\n            </td>\n          </tr>\n        </tbody>\n      </v-simple-table>\n    </v-dialog>\n    <v-dialog v-model=\"add\" max-width=\"450\">\n      <v-card>\n        <v-card-title>AÃ±adir Dispositivo</v-card-title>\n        <v-card-text>\n          <v-form ref=\"addForm\" class=\"ma-3\" @submit.prevent=\"addAssignment()\">\n            <v-file-input\n              label=\"File\"\n              :rules=\"[(v) => !!v || 'File']\"\n              v-model=\"assignmentToAdd.a_file\"\n            ></v-file-input>\n            <v-text-field\n              prepend-icon=\"mdi-biohazard\"\n              label=\"Marca\"\n              :rules=\"[(v) => !!v || 'Marca es requerido']\"\n              v-model=\"assignmentToAdd.a_name\"\n            ></v-text-field>\n            <v-textarea\n              prepend-icon=\"mdi-bike\"\n              label=\"Modelo\"\n              :rules=\"[(v) => !!v || 'Modelo es requerido']\"\n              v-model=\"assignmentToAdd.a_description\"\n            ></v-textarea>\n            <v-btn block class=\"success mt-3\" type=\"submit\">Guardar</v-btn>\n          </v-form>\n        </v-card-text>\n      </v-card>\n    </v-dialog>\n    <v-btn @click=\"add=true\" color=\"deep-orange\" large right fixed bottom fab dark>\n      <v-icon>mdi-plus</v-icon>\n    </v-btn>\n  </v-container>\n</template>\n\n<script>\nimport NavbarP from \"@/components/NavbarP\";\n\nexport default {\n  data: () => ({\n    alert: { show: false },\n    professor: {},\n    course: {},\n    assignmentsList: [],\n    assignmentToAdd: {},\n    deliveriesList: [],\n    showDelv: false,\n    add: false\n  }),\n  methods: {\n    open(link) {\n      window.open(link);\n    },\n    async addAssignment() {\n      let valid = this.$refs.addForm.validate();\n      if (valid) {\n        try {\n          const newAssignment = new FormData();\n          newAssignment.append(\"a_name\", this.assignmentToAdd.a_name);\n          newAssignment.append(\n            \"a_description\",\n            this.assignmentToAdd.a_description\n          );\n          newAssignment.append(\"a_file\", this.assignmentToAdd.a_file);\n\n          const res = await this.axios.post(\n            `/professor/assignment/${this.$route.params.id_c}`,\n            newAssignment\n          );\n          this.assignmentsList.push(res.data.assignment);\n          this.$refs.addForm.reset();\n          this.add = false;\n          this.alert = {\n            show: true,\n            type: \"success\",\n            message: res.data.message\n          };\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    },\n    async getDeliveries(id_a) {\n      try {\n        const res = await this.axios.get(`/professor/deliveries/${id_a}`);\n        this.deliveriesList = res.data;\n        this.showDelv = true;\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  },\n  created: function() {\n    this.professor = JSON.parse(sessionStorage.getItem(\"session\"));\n    if (this.professor == null) {\n      this.$router.push(\"/\");\n    } else if (this.professor.role != \"professor\") {\n      this.$router.push(\"/profile\");\n    } else {\n      // Course information\n      this.axios\n        .get(`/professor/course/${this.$route.params.id_c}`)\n        .then(res => {\n          this.course = res.data.course;\n        })\n        .catch(e => {\n          console.log(e);\n        });\n\n      // Assignments\n      this.axios\n        .get(`/professor/course-assignments/${this.$route.params.id_c}`)\n        .then(res => {\n          this.assignmentsList = res.data;\n        })\n        .catch(e => {\n          console.log(e);\n        });\n    }\n  },\n  components: {\n    NavbarP\n  }\n};\n</script>"]}]}